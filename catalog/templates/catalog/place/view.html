{% extends "catalog/view.html" %}

{% load staticfiles i18n l10n %}
{% load inplace_edit %}

{% block css %}
{{block.super}}
<link href="{% static 'openlayers/openlayers3.css' %}" type="text/css" media="all" rel="stylesheet" />
<link href="{% static 'catalog/map.css' %}" type="text/css" media="all" rel="stylesheet" />
{% endblock %}

{% block source %}
<!-- the map -->
<div id="ap-osm-map"></div>
<div style="display:none;">
<div id="marker" class="ap-osm-marker"></div>
<div id="popup" class="ap-osm-popup">
<div class='popup-header'></div>
<div class='popup-content'></div>
</div>
</div>
<hr>
<!-- the events -->
{% for meeting in resource.meeting_set.all %}

{% endif %}
{% endblock %}

{% block js %}
<script>
var marker_data = [
{
	"x" : {{ resource.geo.location.x|unlocalize }}, 
	"y" : {{ resource.geo.location.y|unlocalize }},
	"address" : '{{ resource.geo.address|escapejs }}',
	"title" : "{{ resource.name|escapejs }}",
},
];
$(window).load(function() {
	$('#ap-source-container').show();
});
</script>
<script src="{% static 'openlayers/openlayers3.js' %}"></script>
<script src="{% static 'catalog/map.js' %}"></script>
{% endblock %}

